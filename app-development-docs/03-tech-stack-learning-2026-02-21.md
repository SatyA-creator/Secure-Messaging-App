# 03 — Tech Stack Learning Guide
**Date:** 2026-02-21
**Author:** Engineering Team
**Project:** QuChat — Mobile Conversion
**Audience:** Developer joining the mobile work stream

---

## How to Read This Document

Each technology is assessed on:
- **Why needed** — concrete reason specific to this project
- **Difficulty** — relative to a developer who knows React
- **Learning time** — to be productive (not expert)
- **Priority** — P1 (must know before starting), P2 (needed during build), P3 (nice to have)

---

## CORE TECHNOLOGIES

---

### 1. Capacitor

| | |
|--|--|
| **Why needed** | Capacitor is the bridge that turns your compiled React app (Vite output in `dist/`) into an Android APK. It wraps the app in a native WebView and provides JS APIs to call native device features. Without it, your React code cannot become an APK. |
| **Difficulty** | ⭐⭐ (Easy — mostly configuration, not programming) |
| **Learning time** | 4–8 hours to be productive |
| **Priority** | P1 — Nothing works without this |

**What you must learn:**
- `capacitor.config.ts` — app ID, app name, server URL
- `npx cap init` — initialise Capacitor in existing project
- `npx cap add android` — add Android platform
- `npx cap sync` — copy Vite build to Android project, sync plugins
- `npx cap open android` — open in Android Studio
- `npx cap run android` — run directly on device/emulator
- Plugin installation pattern: `npm install @capacitor/plugin-name && npx cap sync`

**Key API surface used in this project:**
```typescript
import { Capacitor } from '@capacitor/core';
Capacitor.isNativePlatform()   // true when running as Android app
Capacitor.getPlatform()        // 'android' | 'ios' | 'web'

import { App } from '@capacitor/app';
App.addListener('backButton', handler)
App.addListener('resume', handler)
App.addListener('appUrlOpen', handler)
App.exitApp()
```

**Resources:**
- https://capacitorjs.com/docs/getting-started
- https://capacitorjs.com/docs/android

---

### 2. Android Build Basics (Android Studio)

| | |
|--|--|
| **Why needed** | Capacitor generates an Android Gradle project in `android/`. You need Android Studio to run it on a device, configure signing, and produce APK/AAB files for distribution. |
| **Difficulty** | ⭐⭐⭐ (Medium — unfamiliar tooling, lots of settings) |
| **Learning time** | 1–2 days to be comfortable with basic builds |
| **Priority** | P1 |

**What you must learn:**
- Install Android Studio + Android SDK (API level 33+)
- Set `ANDROID_HOME` environment variable
- Create and manage Android Virtual Devices (AVDs) for testing
- Understand `build.gradle` (app-level) — version code, version name, min SDK
- Debug build vs Release build
- Generate a keystore for signing: `keytool -genkey -v -keystore release.keystore`
- Build signed AAB: Build → Generate Signed Bundle/APK in Android Studio

**Key files generated by Capacitor:**
```
android/
  app/
    src/main/
      AndroidManifest.xml   ← permissions, deep link intent filters
      assets/public/        ← your compiled React app lives here
    build.gradle            ← version, minSdk, targetSdk, dependencies
  build.gradle              ← top-level Gradle config
  capacitor.settings.gradle ← Capacitor plugin references
```

**Resources:**
- https://developer.android.com/studio/install
- https://capacitorjs.com/docs/android/deploying-to-google-play

---

### 3. Ionic React (selective use)

| | |
|--|--|
| **Why needed** | Ionic provides mobile-optimised UI components (`IonTabBar`, `IonBackButton`, `IonRefresher`, `IonInfiniteScroll`) that behave like native UI elements. You do NOT need to rewrite your app in Ionic — you use it selectively for navigation chrome and performance-critical list components. |
| **Difficulty** | ⭐⭐ (Easy if you know React — Ionic components are just React components) |
| **Learning time** | 4 hours for basic components |
| **Priority** | P2 — You can ship the first version without Ionic; add later for polish |

**What you need from Ionic in this project:**
```typescript
// Bottom tab navigation (optional — only if you add tab UI)
import { IonTabBar, IonTabButton, IonIcon, IonLabel } from '@ionic/react';

// Native-feel back button
import { IonBackButton, IonButtons } from '@ionic/react';

// Pull-to-refresh
import { IonRefresher, IonRefresherContent } from '@ionic/react';

// Virtualised message list (high priority for performance)
import { IonInfiniteScroll, IonInfiniteScrollContent } from '@ionic/react';
```

**What you do NOT need from Ionic:**
- `IonPage`, `IonContent` wrappers (your existing layout works)
- `IonInput`, `IonButton` etc. (your shadcn/ui components work fine)
- Ionic Router (`IonReactRouter`) — you keep React Router v6

**Resources:**
- https://ionicframework.com/docs/react
- https://ionicframework.com/docs/api/tab-bar

---

### 4. React Router v6 — MemoryRouter

| | |
|--|--|
| **Why needed** | You currently use `BrowserRouter`. On Android (file:// origin), `BrowserRouter` breaks. `MemoryRouter` stores history in memory, which works correctly on native. |
| **Difficulty** | ⭐ (Very easy — one import change) |
| **Learning time** | 30 minutes |
| **Priority** | P1 — Must fix before anything works on Android |

**The change:**
```typescript
// src/App.tsx
import { Capacitor } from '@capacitor/core';
import { BrowserRouter, MemoryRouter } from 'react-router-dom';

const Router = Capacitor.isNativePlatform() ? MemoryRouter : BrowserRouter;

// Then use <Router> instead of <BrowserRouter>
```

No other routing code changes.

---

## RECOMMENDED TECHNOLOGIES

---

### 5. PWA (Progressive Web App)

| | |
|--|--|
| **Why needed** | PWA lets users install your app from the browser without going through the Play Store. It also enables offline caching via service workers. It is a separate distribution channel alongside the APK. |
| **Difficulty** | ⭐⭐ (Medium — mostly config, some service worker concepts) |
| **Learning time** | 1 day |
| **Priority** | P2 |

**What you must learn:**
- Web App Manifest (`manifest.webmanifest`) — name, icons, display mode, theme colour
- `vite-plugin-pwa` (Vite plugin that generates service worker automatically using Workbox)
- Workbox caching strategies:
  - `CacheFirst` — for app shell (HTML, JS, CSS)
  - `NetworkFirst` — for API calls
  - `StaleWhileRevalidate` — for media/images
- `beforeinstallprompt` event — custom install button in your UI

**Resources:**
- https://vite-pwa-org.netlify.app/
- https://web.dev/progressive-web-apps/

---

### 6. Service Workers

| | |
|--|--|
| **Why needed** | Service workers are the engine behind PWA offline support and background sync. `vite-plugin-pwa` + Workbox handles most of this automatically, but you need to understand the lifecycle to debug issues. |
| **Difficulty** | ⭐⭐⭐ (Medium-Hard — the lifecycle and caching strategies take time to grasp) |
| **Learning time** | 4–6 hours |
| **Priority** | P2 — required only for PWA, not for Android APK |

**Key concepts:**
- Install → Activate → Fetch lifecycle
- Cache versioning and update strategy
- `skipWaiting()` / `clients.claim()`
- How to bypass service worker for WebSocket URLs (service workers cannot intercept WS)

---

### 7. Mobile Navigation Patterns

| | |
|--|--|
| **Why needed** | Mobile users expect bottom tab navigation, slide-over drawers, and swipe-back gestures. These must be added to your existing Sidebar/Chat layout. |
| **Difficulty** | ⭐⭐ (Medium — mostly UI/UX decisions + CSS) |
| **Learning time** | 4 hours |
| **Priority** | P2 |

**What to learn:**
- Bottom tab bar pattern (vs sidebar — sidebar is a web pattern)
- Drawer/slide-over pattern for contact list on mobile
- Swipe gesture for back navigation (Capacitor handles this natively on iOS; Android uses hardware back)
- Status bar management on Android (light/dark icons based on your theme)

---

### 8. Capacitor Native Plugins

| | |
|--|--|
| **Why needed** | Native plugins give your web code access to device hardware: camera, push notifications, filesystem, biometric auth. For a messaging app, the most relevant are Camera and Push Notifications. |
| **Difficulty** | ⭐⭐ (Easy to install, harder to configure permissions correctly) |
| **Learning time** | 2–3 hours per plugin |
| **Priority** | P3 — for V1 you can skip native plugins; the web fallbacks work |

**Plugins relevant to QuChat:**

| Plugin | npm package | Use case |
|--------|------------|---------|
| Camera | `@capacitor/camera` | Take photo / pick from gallery in media upload |
| Push Notifications | `@capacitor/push-notifications` | Receive messages when app is backgrounded |
| Keyboard | `@capacitor/keyboard` | Handle keyboard resize in chat input |
| Status Bar | `@capacitor/status-bar` | Theme the Android status bar |
| App | `@capacitor/app` | Back button, resume event, deep links |
| Filesystem | `@capacitor/filesystem` | Save downloaded media to device storage |
| Share | `@capacitor/share` | Share messages/media via Android share sheet |

**Resources:**
- https://capacitorjs.com/docs/apis

---

### 9. Vite Build Configuration for Mobile

| | |
|--|--|
| **Why needed** | The existing `vite.config.ts` has dev server config but lacks PWA plugin and mobile-specific build settings. You need to add `vite-plugin-pwa` and understand how Vite environments work for `VITE_API_URL`. |
| **Difficulty** | ⭐ (Easy — mostly config additions) |
| **Learning time** | 2 hours |
| **Priority** | P1 |

---

### 10. Android Permissions

| | |
|--|--|
| **Why needed** | Every native capability (camera, notifications, storage) requires declaring permissions in `AndroidManifest.xml`. Capacitor plugins handle most of this automatically, but you need to understand the pattern for debugging. |
| **Difficulty** | ⭐⭐ (Medium — system is straightforward but errors are cryptic) |
| **Learning time** | 2–3 hours |
| **Priority** | P2 |

**Permissions QuChat will need:**
```xml
<!-- android/app/src/main/AndroidManifest.xml -->
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.CAMERA" />
<uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED" />
<!-- Push notifications (if added) -->
<uses-permission android:name="android.permission.POST_NOTIFICATIONS" />
```

---

## Learning Path (Recommended Order)

```
Week 1: Foundation
  Day 1  → Capacitor docs: getting started + Android guide
  Day 2  → Android Studio: install, create AVD, run Hello World
  Day 3  → Integrate Capacitor into this project (follow doc 04)
  Day 4  → Run QuChat on Android emulator
  Day 5  → Fix routing (MemoryRouter) + safe areas

Week 2: PWA + Polish
  Day 1  → vite-plugin-pwa docs + Workbox strategies
  Day 2  → Add PWA manifest + service worker to project
  Day 3  → Ionic React — selective components
  Day 4  → Keyboard + StatusBar + back button handling
  Day 5  → Test on real Android device

Week 3: Native Features
  Day 1–2 → @capacitor/camera plugin
  Day 3   → @capacitor/push-notifications (FCM setup)
  Day 4   → Play Store release build preparation
  Day 5   → Buffer / debugging
```
